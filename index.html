<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance V32 - Live Time & Sync</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --soft-orange: #ffb347; 
            --peach: #fff5e6; 
            --white: #ffffff;
            --text-dark: #5d4037;
        }
        
        body { 
            font-family: 'Prompt', sans-serif; 
            background-color: var(--peach);
            background-image: radial-gradient(#ffcc80 0.5px, transparent 0.5px);
            background-size: 20px 20px;
            min-height: 100vh;
            color: var(--text-dark);
        }

        .glass-card { 
            background: var(--white);
            border-radius: 20px;
            border: 2px solid #ffe0b2;
            box-shadow: 0 8px 20px rgba(255, 179, 71, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .btn-orange { 
            background: var(--soft-orange); 
            color: white; 
            border-radius: 50px; 
            font-weight: 600; 
            border: none; 
            padding: 10px 20px;
            box-shadow: 0 4px 10px rgba(255, 179, 71, 0.3);
            transition: 0.3s;
        }

        .stat-box { 
            background: #fff9f0;
            border-left: 5px solid var(--soft-orange); 
            padding: 12px; 
            border-radius: 15px; 
            position: relative;
        }

        .badge-count { 
            position: absolute; top: -5px; right: -5px; 
            background: #ff7043; color: white; 
            border-radius: 50%; width: 24px; height: 24px; 
            font-size: 0.75rem; display: flex; align-items: center; 
            justify-content: center; font-weight: bold;
        }

        .nav-btn { flex: 1; border-radius: 15px; font-weight: 600; border: 2px solid #ffe0b2; background: white; color: var(--soft-orange); }
        .nav-btn.active-btn { background: var(--soft-orange); color: white; border-color: var(--soft-orange); }

        .sync-tag { 
            font-size: 0.85rem; 
            color: #ef6c00; 
            background: #fff3e0; 
            padding: 6px 15px; 
            border-radius: 12px; 
            font-weight: 600;
            border: 1px dashed #ffb347;
        }

        .live-time-display {
            font-size: 2.5rem;
            font-weight: 600;
            color: #e65100;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="loginSection" class="container d-flex align-items-center justify-content-center" style="min-height:100vh;">
    <div class="glass-card text-center shadow-lg" style="max-width:380px; width:100%; border-top: 8px solid var(--soft-orange);">
        <h2 class="fw-bold mb-4" style="color: var(--soft-orange);">üçä Performance</h2>
        <input type="text" id="user" class="form-control mb-3 py-2" placeholder="Username">
        <input type="password" id="pass" class="form-control mb-4 py-2" placeholder="Password">
        <button onclick="login()" class="btn btn-orange w-100 py-2 shadow">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
</div>

<div id="mainSection" class="hidden">
    <nav class="navbar mb-3 p-3 glass-card mx-2 mt-2">
        <div class="container d-flex justify-content-between align-items-center">
            <span class="navbar-brand fw-bold" style="color: #e65100;">üçä Performance Analytics</span>
            <div class="text-end">
                <div class="small fw-bold">üë§ <span id="empName"></span></div>
                <button onclick="logout()" class="btn btn-sm btn-link text-danger text-decoration-none p-0">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </nav>

    <div class="container pb-5">
        <div class="d-flex gap-2 mb-4 p-1 bg-white shadow-sm" style="border-radius: 20px;">
            <button id="nav-rec" class="btn nav-btn active-btn" onclick="showTab('record')">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô</button>
            <button id="nav-dash" class="btn nav-btn" onclick="showTab('dash')">Dashboard</button>
            <button id="nav-assign" class="btn nav-btn" onclick="showTab('assign')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ú‡∏ô</button>
        </div>

        <div id="tab-record" class="tab-content text-center">
            <div class="glass-card mb-3">
                <div id="bigClock" class="live-time-display">00:00:00</div>
                <h6 id="displayDateText" class="fw-bold text-muted mb-3"></h6>
                
                <div class="row g-3 mt-2">
                    <div class="col-6"><div class="stat-box shadow-sm">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢<br><span id="displayTarget" class="h4 fw-bold">0</span></div></div>
                    <div class="col-6"><div class="stat-box shadow-sm" style="border-left-color:#4caf50">‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á<br><span id="displayActual" class="h4 fw-bold text-success">0</span></div></div>
                </div>
            </div>

            <div class="row g-3">
                <div class="col-6 col-md-4"><div class="stat-box">üì¶ CP No. <span class="badge-count" id="count-CP">0</span><input type="text" class="form-control mt-2 cat-input" data-cat="CP No."></div></div>
                <div class="col-6 col-md-4"><div class="stat-box">üìû Call IN <span class="badge-count" id="count-Call">0</span><input type="text" class="form-control mt-2 cat-input" data-cat="Call IN"></div></div>
                <div class="col-6 col-md-4"><div class="stat-box">üìÑ IR <span class="badge-count" id="count-IR">0</span><input type="text" class="form-control mt-2 cat-input" data-cat="IR"></div></div>
                <div class="col-6 col-md-4"><div class="stat-box">üåê GNS <span class="badge-count" id="count-GNS">0</span><input type="text" class="form-control mt-2 cat-input" data-cat="GNS"></div></div>
                <div class="col-6 col-md-4"><div class="stat-box">üõ†Ô∏è SR <span class="badge-count" id="count-SR">0</span><input type="text" class="form-control mt-2 cat-input" data-cat="SR"></div></div>
                <div class="col-6 col-md-4"><div class="stat-box">üéÅ Camp. <span class="badge-count" id="count-Campaign">0</span><input type="text" class="form-control mt-2 cat-input" data-cat="Campaign"></div></div>
            </div>
            <button onclick="saveWork()" class="btn btn-orange w-100 mt-4 py-3 shadow">üöÄ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Spreadsheet</button>
        </div>

        <div id="tab-dash" class="tab-content hidden">
            <div class="glass-card mb-3">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold m-0">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h6>
                    <button onclick="manualRefresh()" class="btn btn-sm btn-orange px-3 shadow-sm">üîÑ Refresh Data</button>
                </div>

                <div class="text-center mb-4">
                    <div class="sync-tag">
                        ‚ú® ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span class="lastSyncDisplay">-</span>
                    </div>
                </div>

                <div class="row g-2">
                    <div class="col-md-3"><select id="viewType" class="form-select" onchange="toggleFilters()"><option value="daily">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option><option value="monthly">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option><option value="quarterly">‡∏£‡∏≤‡∏¢‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™</option><option value="yearly">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option></select></div>
                    <div class="col-md-3" id="divYear"><select id="selYear" class="form-select" multiple onchange="updateSubFilters()"></select></div>
                    <div class="col-md-3" id="divMonth"><select id="selMonth" class="form-select" multiple onchange="updateDayFilter()"></select></div>
                    <div class="col-md-3" id="divDay"><select id="selDay" class="form-select" multiple></select></div>
                </div>
                <button onclick="processDashboard()" class="btn btn-orange w-100 mt-3 shadow">üìà ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏£‡∏≤‡∏ü</button>
            </div>
            
            <div class="glass-card" style="height: 380px;"><canvas id="perfChart"></canvas></div>
            
            <div class="glass-card px-0 overflow-hidden shadow-sm">
                <div class="table-responsive">
                    <table class="table table-hover table-custom text-center mb-0">
                        <thead style="background: #fff3e0; color: #e65100;">
                            <tr><th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡πÄ‡∏õ‡πâ‡∏≤</th><th>‡∏à‡∏£‡∏¥‡∏á</th><th>Call</th><th>IR</th><th>CP</th><th>GNS</th><th>SR</th><th>Camp.</th></tr>
                        </thead>
                        <tbody id="dashTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tab-assign" class="tab-content hidden">
            <div class="glass-card">
                <h5 class="fw-bold mb-3">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h5>
                <div class="row g-2 mb-4">
                    <div class="col-md-5"><input type="date" id="planDate" class="form-control"></div>
                    <div class="col-md-4"><select id="planType" class="form-select"><option value="72">‡πÄ‡∏ï‡πá‡∏°‡∏ß‡∏±‡∏ô (72)</option><option value="36">‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ß‡∏±‡∏ô (36)</option></select></div>
                    <div class="col-md-3"><button onclick="savePlan('save')" class="btn btn-orange w-100 shadow-sm">‡∏ï‡∏Å‡∏•‡∏á</button></div>
                </div>
                <div class="table-responsive">
                    <table class="table text-center table-sm">
                        <thead><tr><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>Target</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
                        <tbody id="planTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwQwqm_s6_0S6bcBX6xYXb8pLzxDJy5-m5AotyIV4f6uJPxYmTrmNkaXWQsGpk0PwY/exec';
    let currentUser = "", allData = [], allPlans = [], chartInstance = null;

    Chart.register(ChartDataLabels);

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤ Real-time
    setInterval(() => {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('th-TH', { hour12: false });
        document.getElementById('bigClock').innerText = timeStr;
    }, 1000);

    function logout() { location.reload(); }

    async function login() {
        const u = document.getElementById('user').value.trim(), p = document.getElementById('pass').value.trim();
        if(!u || !p) return;
        Swal.fire({title:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...', allowOutsideClick: false, didOpen:()=>Swal.showLoading()});
        try {
            const res = await (await fetch(`${SCRIPT_URL}?action=login&user=${encodeURIComponent(u)}&pass=${encodeURIComponent(p)}`)).json();
            if (res.status === "success") {
                currentUser = res.name; document.getElementById('empName').innerText = res.name;
                document.getElementById('loginSection').classList.add('hidden');
                document.getElementById('mainSection').classList.remove('hidden');
                await refreshView(); Swal.close();
            } else { Swal.fire('Error', '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ', 'error'); }
        } catch (e) { Swal.fire('Error', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ', 'error'); }
    }

    async function refreshView() {
        const res = await (await fetch(SCRIPT_URL)).json();
        allData = res.data.slice(1); allPlans = res.plans.slice(1);
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Refresh ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤)
        const now = new Date();
        const fullTimeStr = now.toLocaleDateString('th-TH') + " " + now.toLocaleTimeString('th-TH');
        document.querySelectorAll('.lastSyncDisplay').forEach(el => el.innerText = fullTimeStr);
        
        const todayStr = now.toISOString().split('T')[0];
        const userPlans = allPlans.filter(p => p[1] === currentUser);
        const todayData = allData.filter(d => d[0].split('T')[0] === todayStr && d[1] === currentUser);
        
        document.getElementById('displayTarget').innerText = userPlans.find(p => p[0].split('T')[0] === todayStr)?.[3] || 0;
        document.getElementById('displayActual').innerText = todayData.length;
        document.getElementById('displayDateText').innerText = 'üìÖ ' + now.toLocaleDateString('th-TH', {day:'numeric', month:'long', year:'numeric'});

        const cats = { "CP": "CP No.", "Call": "Call IN", "IR": "IR", "GNS": "GNS", "SR": "SR", "Campaign": "Campaign" };
        for (let id in cats) document.getElementById(`count-${id}`).innerText = todayData.filter(d => d[2] === cats[id]).length;
        
        let h = ""; userPlans.sort((a,b)=>new Date(b[0])-new Date(a[0])).slice(0,5).forEach(p => {
            h += `<tr><td>${new Date(p[0]).toLocaleDateString('th-TH')}</td><td>${p[3]}</td><td><button class="btn btn-sm text-danger" onclick="savePlan('delete','${p[0].split('T')[0]}')">‡∏•‡∏ö</button></td></tr>`;
        });
        document.getElementById('planTableBody').innerHTML = h;
    }

    async function saveWork() {
        const entries = []; 
        document.querySelectorAll('.cat-input').forEach(i => { if(i.value.trim()) entries.push({category: i.dataset.cat, caseId: i.value.trim()}); });
        if(!entries.length) return Swal.fire('‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô','‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç Case ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ä‡πà‡∏≠‡∏á','warning');
        Swal.showLoading();
        await fetch(SCRIPT_URL, {method:'POST', body: JSON.stringify({action:'saveData', date: new Date().toISOString().split('T')[0], employee: currentUser, target: document.getElementById('displayTarget').innerText, entries})});
        document.querySelectorAll('.cat-input').forEach(i => i.value = ""); 
        await refreshView(); Swal.fire({icon:'success', title:'‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', timer:800, showConfirmButton:false});
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πâ‡∏≤ Tab ‡πÅ‡∏•‡∏∞ Dashboard (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô V31)
    function showTab(t) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
        document.getElementById('tab-' + t).classList.remove('hidden');
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active-btn'));
        document.getElementById('nav-' + (t==='record'?'rec':t)).classList.add('active-btn');
        if(t === 'dash') initDashboard();
    }
    function initDashboard() {
        const years = [...new Set(allPlans.filter(p => p[1] === currentUser).map(p => new Date(p[0]).getFullYear()))].sort((a,b)=>b-a);
        document.getElementById('selYear').innerHTML = years.map(y => `<option value="${y}">${y}</option>`).join('');
        toggleFilters();
    }
    function toggleFilters() {
        const t = document.getElementById('viewType').value;
        document.getElementById('divMonth').classList.toggle('hidden', t === 'yearly');
        document.getElementById('divDay').classList.toggle('hidden', t !== 'daily');
        updateSubFilters();
    }
    function updateSubFilters() {
        const t = document.getElementById('viewType').value, selM = document.getElementById('selMonth');
        const ms = ["‡∏°.‡∏Ñ.","‡∏Å.‡∏û.","‡∏°‡∏µ.‡∏Ñ.","‡πÄ‡∏°.‡∏¢.","‡∏û.‡∏Ñ.","‡∏°‡∏¥.‡∏¢.","‡∏Å.‡∏Ñ.","‡∏™.‡∏Ñ.","‡∏Å.‡∏¢.","‡∏ï.‡∏Ñ.","‡∏û.‡∏¢.","‡∏ò.‡∏Ñ."];
        if (t === 'daily' || t === 'monthly') selM.innerHTML = ms.map((m, i) => `<option value="${i+1}">${m}</option>`).join('');
        else if (t === 'quarterly') selM.innerHTML = `<option value="1">Q1</option><option value="2">Q2</option><option value="3">Q3</option><option value="4">Q4</option>`;
    }
    function updateDayFilter() {
        const ys = Array.from(document.getElementById('selYear').selectedOptions).map(o => o.value);
        const ms = Array.from(document.getElementById('selMonth').selectedOptions).map(o => o.value);
        let ds = allPlans.filter(p => p[1] === currentUser && ys.includes(new Date(p[0]).getFullYear().toString()) && ms.includes((new Date(p[0]).getMonth()+1).toString())).map(p => p[0].split('T')[0]);
        document.getElementById('selDay').innerHTML = [...new Set(ds)].sort().map(d => `<option value="${d}">${new Date(d).getDate()}/${new Date(d).getMonth()+1}</option>`).join('');
    }
    function processDashboard() {
        const type = document.getElementById('viewType').value;
        const sY = Array.from(document.getElementById('selYear').selectedOptions).map(o => o.value);
        const sM = Array.from(document.getElementById('selMonth').selectedOptions).map(o => o.value);
        const sD = Array.from(document.getElementById('selDay').selectedOptions).map(o => o.value);
        let groups = {};
        allPlans.filter(p => p[1] === currentUser).forEach(p => {
            const d = new Date(p[0]), y = d.getFullYear().toString(), m = (d.getMonth()+1).toString(), q = Math.ceil(m/3).toString(), f = p[0].split('T')[0];
            let k = "";
            if(type === 'yearly' && sY.includes(y)) k = y;
            else if(type === 'quarterly' && sY.includes(y) && sM.includes(q)) k = `Q${q}/${y}`;
            else if(type === 'monthly' && sY.includes(y) && sM.includes(m)) k = `${m}/${y}`;
            else if(type === 'daily' && sD.includes(f)) k = f;
            if(k) { if(!groups[k]) groups[k] = { t: 0, a: 0, c: {} }; groups[k].t += parseInt(p[3]); }
        });
        allData.filter(d => d[1] === currentUser).forEach(d => {
            const date = new Date(d[0]), y = date.getFullYear().toString(), m = (date.getMonth()+1).toString(), q = Math.ceil(m/3).toString(), f = d[0].split('T')[0], cat = d[2];
            let k = "";
            if(type === 'yearly' && sY.includes(y)) k = y;
            else if(type === 'quarterly' && sY.includes(y) && sM.includes(q)) k = `Q${q}/${y}`;
            else if(type === 'monthly' && sY.includes(y) && sM.includes(m)) k = `${m}/${y}`;
            else if(type === 'daily' && sD.includes(f)) k = f;
            if(k && groups[k]) { groups[k].a++; groups[k].c[cat] = (groups[k].c[cat] || 0) + 1; }
        });
        const labs = Object.keys(groups);
        if (chartInstance) chartInstance.destroy();
        chartInstance = new Chart(document.getElementById('perfChart'), {
            type: 'bar',
            data: { labels: labs, datasets: [{ label: '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢', data: labs.map(l => groups[l].t), backgroundColor: '#ffcc80', borderRadius: 5 }, { label: '‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á', data: labs.map(l => groups[l].a), backgroundColor: '#ff7043', borderRadius: 5 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { datalabels: { anchor: 'end', align: 'top', color: '#5d4037', font: { weight: 'bold' } } } }
        });
        let h = ""; labs.forEach(l => {
            h += `<tr><td>${l}</td><td>${groups[l].t}</td><td class="fw-bold text-orange">${groups[l].a}</td><td>${groups[l].c['Call IN']||0}</td><td>${groups[l].c['IR']||0}</td><td>${groups[l].c['CP No.']||0}</td><td>${groups[l].c['GNS']||0}</td><td>${groups[l].c['SR']||0}</td><td>${groups[l].c['Campaign']||0}</td></tr>`;
        });
        document.getElementById('dashTableBody').innerHTML = h;
    }
    async function savePlan(a, d) { 
        Swal.showLoading();
        await fetch(SCRIPT_URL, {method:'POST', body: JSON.stringify({action:'savePlan', subAction: a, date: d || document.getElementById('planDate').value, employee: currentUser, target: document.getElementById('planType').value, workType:'Plan'})}); 
        await refreshView(); Swal.close();
    }
    async function manualRefresh() { 
        Swal.fire({title:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...', didOpen:()=>Swal.showLoading(), timer: 1500}); 
        await refreshView(); 
    }
</script>
</body>
</html>